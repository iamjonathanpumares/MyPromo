{% extends 'base.html' %}
{% load staticfiles %}
{% block styles_tags %}
	<title>Cupones</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
	<!-- Bootstrap core CSS -->
    <link href="{% static "css/bootstrap.css" %}" rel="stylesheet">
    <!--external css-->
    <link href="{% static "css/fileinput.css" %}" media="all" rel="stylesheet" type="text/css" />
    <link href="{% static "font-awesome/css/font-awesome.css" %}" rel="stylesheet" />
    <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
     <script src="{% static "js/fileinput.js" %}" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="{% static "js/gritter/css/jquery.gritter.css" %}" />

    <!-- FANCY BOX -->
    <script type="text/javascript" src="stactic/js/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
    <link rel="stylesheet" href="{% static "js/fancybox/jquery.fancybox.css" %}" type="text/css" media="screen" />
    <script type="text/javascript" src="{% static "js/fancybox/jquery.fancybox.js" %}"></script>

    <!-- Custom styles for this template -->
    <link href="{% static "css/style.css" %}" rel="stylesheet">
    <link href="{% static "css/style-responsive.css" %}" rel="stylesheet">
     <!-- <script src="http://code.jquery.com/jquery-latest.js"></script> -->
     <link rel="stylesheet" href="{% static "css/datepicker.css" %}">

     <!-- Datepicker calendario de el cuadro de texto -->
      
      <script src="{% static "js/bootstrap-datepicker.js" %}"></script>
      <script type="text/javascript" src="{% static "js/gritter/js/jquery.gritter.js" %}"></script>
      <script type="text/javascript" src="{% static "js/gritter-conf.js" %}"></script>
      <style>
        #agregar-cupon
        {
          float: right;
          height: 34px;
        }
      </style>
{% endblock styles_tags %}

{% block menu_inicio %} 
<li class="mt">
    <a href="/home/">
        <i class="fa fa-home"></i>
        <span>Inicio</span>
    </a>
</li>
{% endblock menu_inicio %}

{% block menu_cupones %}
<li class="sub-menu">
    <a class="active" href="javascript:;" >
        <i class="fa fa-tag"></i>
        <span>Cupones</span>
    </a>
    <ul class="sub">
        <li class="active"><a href ="/cupones/"> &nbsp;&nbsp;&nbsp;<i class="fa fa-th-list"></i>Ver empresas</a></li>
    </ul>
</li>
{% endblock menu_cupones %}

{% block section %}
{% if messages %}
    {% for message in messages %}
    <div class="alert alert-success"><b>{{ message }}</b></div>
    {% endfor %}
{% endif %}
  <!-- Cabecera -->
	   <h3><i class="fa fa-angle-right"></i>Agregar Cupón</h3>
      <div class="row mt">
        <div class="col-lg-12">
          <!-- Formulario -->
          <div class="form-panel">
            <h4 class="mb"><i class="fa fa-angle-right"></i> Información General</h4>
            <form enctype="multipart/form-data" class="form-horizontal style-form" method="post">
              {% csrf_token %}
              <div class="form-group">
                {{ form.non_field.errors }}
                {{ form.titulo.errors }}
                <label class="col-sm-2 col-sm-2 control-label">Titulo:</label>
                <div class="col-sm-10">
                  {{ form.titulo }}
                </div>
              </div>

              <div class="form-group">
                {{ form.vigencia.errors }}
                <label class="col-sm-2 col-sm-2 control-label">Vigencia:</label>
                <div class="col-sm-10">
                  {{ form.vigencia }}                              
                </div>
              </div>

              <div class="form-group">
                {{ form.descripcion.errors }}
                <label class="col-sm-2 col-sm-2 control-label">Descripcción:</label>
                <div class="col-sm-10">
                  {{ form.descripcion }}
                </div>
              </div>

              <!-- ++++++++++ Cuadro de imagenes ++++++++ -->
              <h4 class="mb"><i class="fa fa-angle-right"></i> Imágenes</h4>
              <div class="form-group">
                {{ form.imagen.errors }}
                <label class="col-sm-2 col-sm-2 control-label">Archivo:</label>
                <div class="col-sm-10">
                  {{ form.imagen }}
                </div>
              </div>
  
              <button type="reset" class="btn btn-primary goright ml">Limpiar</button>&nbsp;
              <button type="submit" id="agregar-cupon" class="btn btn-info  btn-sm">Agregar Cupón</button>
          </form>
        </div>
        <br>
      </div>
    </div>

      

  <!--  Modificacion de cupones -->
  <h3><i class="fa fa-angle-right"></i>Modificar Cupón</h3>
  <div class="row mt">
    <div class="col-md-12">
      <div class="form-panel">
        <table class="table table-striped table-advance table-hover">
          <h4><i class="fa fa-angle-right"></i> Tabla de cupones</h4>
          <div class="col-md-4">
            <div class="input-group">
              <input type="text" class="form-control" placeholder="Buscar...">
              <span class="input-group-addon"><i class="fa fa-search"></i></span>
            </div>
          </div>
          <hr>
          <thead>
            <tr>
              <th><i class="fa fa-picture-o"></i> Logo</th>
              <th class="hidden-phone"><i class="fa fa-font"></i> Titulo</th>
              <th><i class="fa fa-calendar-o"></i> Vigencia</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {% for cupon in cupones %}
            <tr>
              <td><a href="{{ cupon.imagen.url }}" class="fancybox-cupon"><img src="{{ cupon.imagen.url }}" alt="cupon" width="80px" height="40px" /></a></td>
              <td class="hidden-phone">{{ cupon.titulo }}</td>
              <td>{{ cupon.vigencia }}</td>
              <td>
                <a href="/cupones/{{ cupon.id }}/modificar/" class="fancybox" title="Modificar cupon"><button class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></button></a>
                <!-- <a href="/cupones/{{ cupon.id }}/modificar/"><button class="btn btn-primary btn-xs"><i class="fa fa-pencil"></i></button></a> -->
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  
{% endblock section %}

{% block scripts_tags %}
<!-- Funcion Javascript de calendario -->
<script src="{% static "js/bootstrap-datepicker.js" %}"></script>
<script type="text/javascript">
  $(document).ready(function () {
      $('#fecha').datepicker({
          format: "dd/mm/yyyy"
      });
      $(".fancybox").fancybox({
        'autoScale'         : false,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'width'             : 900,
        'height'            : 500,
        'type'              : 'iframe',
        'afterClose'        : function() {
          location.reload();
        },
      });
      $(".fancybox-cupon").fancybox({
          helpers: {
              title : {
                  type : 'float'
              }
          }
      });
    });  
</script>
{% endblock scripts_tags %}